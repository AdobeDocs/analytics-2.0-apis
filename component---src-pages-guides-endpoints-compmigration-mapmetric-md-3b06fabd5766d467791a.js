"use strict";(self.webpackChunkanalytics_2_0_apis=self.webpackChunkanalytics_2_0_apis||[]).push([[6280],{49012:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return r},default:function(){return u}});var n=t(58168),i=t(98587),s=(t(36190),t(28619)),d=t(83407),m=["components"],r={},p=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",a)}},l=p("InlineAlert"),o=p("CodeBlock"),c={_frontmatter:r},x=d.A;function u(e){var a=e.components,t=(0,i.A)(e,m);return(0,s.mdx)(x,(0,n.A)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"metric-mapping-api"},"Metric Mapping API"),(0,s.mdx)("p",null,"To map metrics from Adobe Analytics to a Customer Journey Analytics data view within an XDM schema, follow these steps:"),(0,s.mdx)("ol",null,(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"In Customer Journey Analytics, create the metrics that you want to be mapped from the existing Adobe Analytics metrics.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Collect the metric ID information to be used in the mappings. If you have a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file that defines your XDM schema for a data view, it may be helpful to reference it. You can also use the ",(0,s.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/cja-apis/docs/endpoints/metrics/"},"GET metrics")," endpoint to see a list of metrics and their IDs for a data view.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Create a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file that contains the mappings for your metrics. Refer to the ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," example above for dimensions mappings and use the same format for your metrics."),(0,s.mdx)("table",{parentName:"li"},(0,s.mdx)("thead",{parentName:"table"},(0,s.mdx)("tr",{parentName:"thead"},(0,s.mdx)("th",{parentName:"tr",align:null},"aaId"),(0,s.mdx)("th",{parentName:"tr",align:null},"cjaId"),(0,s.mdx)("th",{parentName:"tr",align:null},"note"))),(0,s.mdx)("tbody",{parentName:"table"},(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"evar5"),(0,s.mdx)("td",{parentName:"tr",align:null},"cja.evar5"),(0,s.mdx)("td",{parentName:"tr",align:null},"organization")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"evar7"),(0,s.mdx)("td",{parentName:"tr",align:null},"cja.evar7"),(0,s.mdx)("td",{parentName:"tr",align:null},"page")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"evar8"),(0,s.mdx)("td",{parentName:"tr",align:null},"cja.evar8"),(0,s.mdx)("td",{parentName:"tr",align:null},"product")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"evar9"),(0,s.mdx)("td",{parentName:"tr",align:null},"cja.evar9"),(0,s.mdx)("td",{parentName:"tr",align:null},"day")))))),(0,s.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"The ",(0,s.mdx)("inlineCode",{parentName:"p"},"aaId")," label, as shown in the example mapping ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file above, has different meanings, depending upon endpoint or API service. In the example ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," above, it is the metric name in Analytics. In the related ",(0,s.mdx)("a",{parentName:"p",href:"/analytics-2.0-apis/src%5Cpages%5Cguides%5Cendpoints%5Ccompmigration%5Cindex.md"},"Component Migration API service"),", ",(0,s.mdx)("inlineCode",{parentName:"p"},"aaId")," is a parameter with a different function. For more information on the difference, see the description for the ",(0,s.mdx)("inlineCode",{parentName:"p"},"aaId")," parameter in the ",(0,s.mdx)("a",{parentName:"p",href:"/analytics-2.0-apis/src%5Cpages%5Cguides%5Cendpoints%5Ccompmigration%5Cindex.md"},"Component Migration API guide"),". "),(0,s.mdx)("ol",{start:4},(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Use the metric mapping APIs below to upload (or create), update, or retrieve the mappings.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Use the ",(0,s.mdx)("a",{parentName:"p",href:"index.md"},"Component Migration API")," to migrate the metrics to CJA."))),(0,s.mdx)("p",null,"Use these endpoints to map metrics to CJA within an XDM schema:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#post-mapping-metrics-csv"},"POST mapping metrics csv"),": Create metrics mappings with a ",(0,s.mdx)("inlineCode",{parentName:"li"},"csv")," file"),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#get-mapping-metrics-csv"},"GET mapping metrics csv"),": Retrieve metrics mappings with a ",(0,s.mdx)("inlineCode",{parentName:"li"},"csv")," file"),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#put-mapping-metric-csv"},"PUT mapping metrics csv"),": Update metrics mappings with a ",(0,s.mdx)("inlineCode",{parentName:"li"},"csv")," file"),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#delete-metric-mapping-all"},"DELETE mapping metric all"),": Delete all metrics mapping")),(0,s.mdx)("h2",{id:"post-mapping-metrics-csv"},"POST mapping metrics csv"),(0,s.mdx)("p",null,"Use this endpoint to upload a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file that maps Analytics metrics to CJA metrics for a specified data view."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"POST https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/map/csv")),(0,s.mdx)("h3",{id:"request-and-response-examples"},"Request and Response Examples"),(0,s.mdx)("p",null,"Click the ",(0,s.mdx)("strong",{parentName:"p"},"Request")," tab in the following example to see a cURL request for this endpoint. Click the ",(0,s.mdx)("strong",{parentName:"p"},"Response")," tab to see a successful JSON response for the request."),(0,s.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"request"},"Request"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X \'POST\' \\\n  "https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/map/csv?rsid=examplersid&dataId=exampledv" \\\n  -H "accept: application/json" \\\n  -H "x-api-key: {CLIENT_ID}" \\\n  -H "Authorization: Bearer {ACCESS_TOKEN}" \\\n  -H "Content-Type: application/json" \\\n  -F \'file=examplecsv\'\n')),(0,s.mdx)("h4",{id:"response"},"Response"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "result": "success",\n  "method": "POST",\n  "message": "Metrics mapped successfully"\n}\n')),(0,s.mdx)("h3",{id:"request-example-details"},"Request example details"),(0,s.mdx)("p",null,"The POST example above shows the ",(0,s.mdx)("inlineCode",{parentName:"p"},"rsid")," and ",(0,s.mdx)("inlineCode",{parentName:"p"},"dataId")," values as ",(0,s.mdx)("inlineCode",{parentName:"p"},"examplersid")," and ",(0,s.mdx)("inlineCode",{parentName:"p"},"exampledv")," respectively in the URL of the cURL request. These values are added as query parameters. The file ",(0,s.mdx)("inlineCode",{parentName:"p"},"examplefilecsv")," is included so that it is uploaded as the body of the request. This file should contain the metrics mappings as described above in the example template."),(0,s.mdx)("h3",{id:"request-parameters"},"Request parameters"),(0,s.mdx)("p",null,"This endpoint includes request parameters described in previous sections."),(0,s.mdx)("h3",{id:"response-parameters"},"Response Parameters"),(0,s.mdx)("p",null,"This endpoint includes response parameters described in previous sections."),(0,s.mdx)("h2",{id:"get-mapping-metrics-csv"},"GET mapping metrics csv"),(0,s.mdx)("p",null,"Use this endpoint to retrieve a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file of metrics mappings associated with a data view. You can also use this  endpoint to retrieve a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file with metrics filtered by metric IDs. "),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"GET https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/csv")),(0,s.mdx)("h3",{id:"request-and-response-examples-1"},"Request and Response Examples"),(0,s.mdx)("p",null,"Click the ",(0,s.mdx)("strong",{parentName:"p"},"Request")," tab in the following example to see a cURL request for this endpoint. Click the ",(0,s.mdx)("strong",{parentName:"p"},"Response")," tab to see a successful JSON response for the request."),(0,s.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"request-1"},"Request"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X \'GET\' \\\n  "https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/csv?rsid=examplersid&dataId=exampledv&metricIds=cja1%2C%20cja2%2C%20cja3" \\\n  -H "accept: application/json" \\\n  -H "x-api-key: {CLIENT_ID}" \\\n  -H "Authorization: Bearer {ACCESS_TOKEN}"\n')),(0,s.mdx)("h4",{id:"response-1"},"Response"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "result": "success",\n  "method": "GET",\n  "message": "examplecsv retrieved successfully",\n  "data": "dimension1,dimension2,dimension3\\nvalue1,value2,value3"\n}\n')),(0,s.mdx)("h3",{id:"request-example-details-1"},"Request example details"),(0,s.mdx)("p",null,"The GET example above shows the following:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"The  ",(0,s.mdx)("inlineCode",{parentName:"li"},"rsid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"dataId")," values are included as ",(0,s.mdx)("inlineCode",{parentName:"li"},"examplersid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"exampledv")," respectively in the URL of the cURL request. These values are added as query parameters. "),(0,s.mdx)("li",{parentName:"ul"},"The request includes a list of metrics mappings filtered for only the metrics with IDs: ",(0,s.mdx)("inlineCode",{parentName:"li"},"cja1"),", ",(0,s.mdx)("inlineCode",{parentName:"li"},"cja2"),", and ",(0,s.mdx)("inlineCode",{parentName:"li"},"cja3"),".")),(0,s.mdx)("h3",{id:"request-parameters-1"},"Request parameters"),(0,s.mdx)("p",null,"This endpoint includes request parameters described in previous sections."),(0,s.mdx)("h3",{id:"response-parameters-1"},"Response Parameters"),(0,s.mdx)("p",null,"This endpoint includes response parameters described in previous sections."),(0,s.mdx)("h2",{id:"put-mapping-dimensions-csv"},"PUT mapping dimensions csv"),(0,s.mdx)("p",null,"Use this endpoint to update a ",(0,s.mdx)("inlineCode",{parentName:"p"},"csv")," file that maps Analytics metrics to CJA metrics for a specified data view."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"PUT https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/csv")),(0,s.mdx)("h3",{id:"request-and-response-examples-2"},"Request and Response Examples"),(0,s.mdx)("p",null,"Click the ",(0,s.mdx)("strong",{parentName:"p"},"Request")," tab in the following example to see a cURL request for this endpoint. Click the ",(0,s.mdx)("strong",{parentName:"p"},"Response")," tab to see a successful JSON response for the request."),(0,s.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"request-2"},"Request"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X \'PUT\' \\\n  "https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/csv?rsid=examplersid&dataId=exampledv" \\\n  -H "accept: application/json" \\\n  -H "x-api-key: {CLIENT_ID}" \\\n  -H "Authorization: Bearer {ACCESS_TOKEN}"\n  -F \'file=examplecsv\'\n')),(0,s.mdx)("h4",{id:"response-2"},"Response"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'\n{\n      "cjaid": "cja.evar5",\n      "dataId": "exampledv",\n      "xdmMapped": "true",\n      "aaId": "evar5",\n      "rsid": "examplersid",\n      "xdmNotes": "organization"\n}\n\n')),(0,s.mdx)("h3",{id:"request-example-details-2"},"Request example details"),(0,s.mdx)("p",null,"The PUT example above shows the following:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"The  ",(0,s.mdx)("inlineCode",{parentName:"li"},"rsid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"dataId")," values are included as ",(0,s.mdx)("inlineCode",{parentName:"li"},"examplersid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"exampledv")," respectively in the URL of the cURL request. These values are added as query parameters."),(0,s.mdx)("li",{parentName:"ul"},"The file updated ",(0,s.mdx)("inlineCode",{parentName:"li"},"examplefilecsv")," is included so that it is uploaded as the body of the request. This file should contain the metrics mappings as described above in the example template.")),(0,s.mdx)("h3",{id:"response-example-details"},"Response example details"),(0,s.mdx)("p",null,"The successful PUT example above shows the updated values for the parameter associated with the request. Note that the ",(0,s.mdx)("inlineCode",{parentName:"p"},"xdmMapped")," parameter also includes a ",(0,s.mdx)("inlineCode",{parentName:"p"},"true")," value, indicating a successful mapping. "),(0,s.mdx)("h3",{id:"request-parameters-2"},"Request Parameters"),(0,s.mdx)("p",null,"This endpoint includes request parameters described in previous sections."),(0,s.mdx)("h3",{id:"response-parameters-2"},"Response Parameters"),(0,s.mdx)("p",null,"The following table describes the PUT mapping metrics response parameters not previously defined in other sections:"),(0,s.mdx)("table",null,(0,s.mdx)("thead",{parentName:"table"},(0,s.mdx)("tr",{parentName:"thead"},(0,s.mdx)("th",{parentName:"tr",align:null},"Name"),(0,s.mdx)("th",{parentName:"tr",align:null},"Type"),(0,s.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,s.mdx)("tbody",{parentName:"table"},(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},(0,s.mdx)("inlineCode",{parentName:"td"},"cjaId")),(0,s.mdx)("td",{parentName:"tr",align:null},"string"),(0,s.mdx)("td",{parentName:"tr",align:null},"The metric ID in CJA")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},(0,s.mdx)("inlineCode",{parentName:"td"},"dataId")),(0,s.mdx)("td",{parentName:"tr",align:null},"string"),(0,s.mdx)("td",{parentName:"tr",align:null},"The data view ID in CJA")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},(0,s.mdx)("inlineCode",{parentName:"td"},"xdmMapped")),(0,s.mdx)("td",{parentName:"tr",align:null},"boolean"),(0,s.mdx)("td",{parentName:"tr",align:null},"Whether the metric was mapped in an XDM schema")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},(0,s.mdx)("inlineCode",{parentName:"td"},"xdmNotes")),(0,s.mdx)("td",{parentName:"tr",align:null},"string"),(0,s.mdx)("td",{parentName:"tr",align:null},"The text of the note for the metric in the uploaded ",(0,s.mdx)("inlineCode",{parentName:"td"},"csv")," file")))),(0,s.mdx)("h2",{id:"delete-mapping-dimensions-all"},"DELETE mapping dimensions all"),(0,s.mdx)("p",null,"Use this endpoint to delete all metric mappings for specified report suites and data view IDs. If no mappings exist, this endpoint returns a successful response."),(0,s.mdx)("p",null,(0,s.mdx)("inlineCode",{parentName:"p"},"DELETE https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/all")),(0,s.mdx)("h3",{id:"request-and-response-examples-3"},"Request and Response Examples"),(0,s.mdx)("p",null,"Click the ",(0,s.mdx)("strong",{parentName:"p"},"Request")," tab in the following example to see a cURL request for this endpoint. Click the ",(0,s.mdx)("strong",{parentName:"p"},"Response")," tab to see a successful JSON response for the request."),(0,s.mdx)(o,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"request-3"},"Request"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X \'DELETE\' \\\n  "https://analytics.adobe.io/api/{GLOBAL_COMPANY_ID}/cjamigration/mapping/metrics/all?rsid=examplersid&dataId=exampledv" \\\n  -H "accept: application/json" \\\n  -H "x-api-key: {CLIENT_ID}" \\\n  -H "Authorization: Bearer {ACCESS_TOKEN}"\n')),(0,s.mdx)("h4",{id:"response-3"},"Response"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "result": "success",\n  "method": "DELETE",\n  "message": "Metrics mappings deleted successfully"  \n}\n')),(0,s.mdx)("h3",{id:"request-example-details-3"},"Request example details"),(0,s.mdx)("p",null,"The DELETE example above shows the following:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"The ",(0,s.mdx)("inlineCode",{parentName:"li"},"rsid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"dataId")," values are included as ",(0,s.mdx)("inlineCode",{parentName:"li"},"examplersid")," and ",(0,s.mdx)("inlineCode",{parentName:"li"},"exampledv")," respectively in the URL of the cURL request. These values are added as query parameters."),(0,s.mdx)("li",{parentName:"ul"},"All of the metrics in the specified report suite and CJA data view are to be deleted with this request.")),(0,s.mdx)("h3",{id:"request-parameters-3"},"Request Parameters"),(0,s.mdx)("p",null,"This endpoint includes request parameter described in previous sections. "))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-endpoints-compmigration-mapmetric-md-3b06fabd5766d467791a.js.map