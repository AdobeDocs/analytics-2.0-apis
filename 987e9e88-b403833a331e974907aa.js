"use strict";(self.webpackChunkanalytics_2_0_apis=self.webpackChunkanalytics_2_0_apis||[]).push([[5298],{18356:function(e,t,n){n.d(t,{i:function(){return z}});var i=n(10467),l=n(64467),r=n(45458),o=n(54756),a=n.n(o),s=n(36190),d=n(41168),c=n(99634),u=n.n(c),p=n(35413),f=n(71052),v=n(25013),m=n(88790),g=n(52359),h=n(68623),w=n(76944),y=n(3322),b=n(36002),C=n(73193),O=n(7256),x=n(94087),Y=n(19243),S=n(2047),D=n(99744),A=n(3823);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=/^(?=[A-Za-z0-9\s]{6,}$)[A-Za-z0-9\s]*$/,N={name:"14s3c4g",styles:"display:flex;gap:32px;width:100%;flex-direction:column"},I={name:"h8f25w",styles:"color:var(--spectrum-global-color-gray-800);display:inline-flex"},F={name:"budh8k",styles:"display:flex;flex-direction:column;gap:16px"},T={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"},z=function e(t){var n,l,o=t.showCreateForm,c=t.setShowCreateForm,j=t.isCreateNewCredential,z=t.setIsCreateNewCredential,E=t.setIsPrevious,_=t.formData,H=t.setFormData,L=(0,s.useContext)(A.A).getCredentialData,q=(0,s.useState)(!1),B=q[0],M=q[1],U=(0,s.useState)(!1),V=U[0],R=U[1],X=(0,s.useState)({}),$=X[0],J=X[1],Z=(0,s.useState)(""),W=Z[0],G=Z[1],K=(0,s.useState)(!1),Q=K[0],ee=K[1],te=(0,s.useState)([]),ne=te[0],ie=te[1],le=(0,s.useState)(!1),re=le[0],oe=le[1],ae=(0,s.useState)(!1),se=ae[0],de=ae[1],ce=(0,s.useState)(!1),ue=ce[0],pe=ce[1],fe=(0,s.useState)(!1),ve=fe[0],me=fe[1],ge=(0,s.useState)(),he=ge[0],we=ge[1],ye=(0,s.useContext)(A.A),be=ye.selectedOrganization,Ce=ye.template,Oe=ye.previousProjectDetail,xe=null==L?void 0:L[e],Ye=null==xe||null===(n=xe.children)||void 0===n?void 0:n.filter((function(e){return Object.keys(e.props).some((function(e){return e.startsWith("contextHelp")}))}));(0,s.useEffect)((function(){var e;null!==(e=window.adobeIMS)&&void 0!==e&&e.isSignedInUser()?setTimeout((function(){M(!1)}),1e3):M(!0)}),[null===(l=window.adobeIMS)||void 0===l?void 0:l.isSignedInUser()]),(0,s.useEffect)((function(){o&&R(!1)}),[o]),(0,s.useEffect)((function(){!function(){var e={},t={label:"Language",selectOptions:[]},n={label:"products",productList:[]};null==xe||xe.children.forEach((function(i){var l,o,a=i.type,s=i.props;a===h.o&&null!=s&&s.children&&(t.required=s.required||!1,(l=t.selectOptions).push.apply(l,(0,r.A)([].concat(s.children).map((function(e){var t=e.props;return{title:t.title,href:t.href}})))),H((function(e){var t,n;return k(k({},e),Array.isArray(s.children)?null:{Download:null===(t=s.children)||void 0===t||null===(n=t.props)||void 0===n?void 0:n.title})}))),a===S.lk&&null!=s&&s.children&&(o=n.productList).push.apply(o,(0,r.A)([].concat(s.children).map((function(e){var t=e.props;return{label:t.label,icon:t.icon}})))),e[a]=k(k({},s),{},{required:a===m.X||(null==s?void 0:s.required)})})),t.selectOptions.length&&(e[w.f]=t,1===t.selectOptions.length&&H((function(e){var n,i;return k(k({},e),{},{Download:null===(n=t.selectOptions[0])||void 0===n?void 0:n.title,zipUrl:null===(i=t.selectOptions[0])||void 0===i?void 0:i.href})}))),null!=n&&n.productList.length&&(e[S.Yt]=n);var i=!(null==Oe||!Oe.count);de(!!i),ie(e)}()}),[]),(0,s.useEffect)((function(){var e,t=P.test(_.CredentialName),n=xe.children.some((function(e){return e.type===g.o}));n?_.AllowedOrigins&&(e=(0,f.$p)(_.AllowedOrigins)):e=!0,we(e);var i=t&&(!n||e)&&!0===_.Agree;oe(i)}),[_]);var Se=function e(t,n){var i;if(i="Download"===n?t.title:"Downloads"===n||"Agree"===n?t.target.checked:t.target.value,H((function(e){var t;return k(k({},e),{},((t={})[n]=i,t))})),"Downloads"===n&&e(null==Ne?void 0:Ne.selectOptions[0],"Download"),"Download"===n){var l,r=null==ne||null===(l=ne[w.f])||void 0===l?void 0:l.selectOptions.find((function(e){return e.title===i}));r&&H((function(e){return k(k({},e),{},{zipUrl:r.href})}))}},De=function(){var e=(0,i.A)(a().mark((function e(){var t,n,i,l,r,o,s,d,u,p,f,v,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=null===(t=window.adobeIMS)||void 0===t||null===(n=t.getTokenFromStorage())||void 0===n?void 0:n.token)||console.log("User not logged in"),M(!0),c(!1),l=Ce.apis.map((function(e){return{code:e.code,credentialType:e.credentialType,flowType:e.flowType,licenseConfigs:Array.isArray(e.licenseConfigs)&&e.licenseConfigs.length>0?[k(k({},e.licenseConfigs[0]),{},{op:"add"})]:[]}})),r={projectName:_.CredentialName,description:"created for get credential",metadata:{domain:_.AllowedOrigins},orgId:be.code,apis:l},e.prev=6,u="/templates/install/"+Ce.id,e.next=10,fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i,"x-api-key":null===(o=window)||void 0===o||null===(s=o.adobeIMS)||void 0===s||null===(d=s.adobeIdData)||void 0===d?void 0:d.client_id,Accept:"application/json"},body:JSON.stringify(r)});case 10:return p=e.sent,e.next=13,null==p?void 0:p.json();case 13:f=e.sent,p.ok?(J(f),ee(!0),me(!0),M(!1)):(v=f.errors[0].message.match(/\((\{.*\})\)/)[1],m=JSON.parse(v),a=m.messages[0].message,M(!1),me(!0),oe(!1),G(a),c(!0),R(!0)),e.next=24;break;case 17:e.prev=17,e.t0=e.catch(6),c(!0),M(!1),me(!0),G(e.t0.message),R(!0);case 24:case"end":return e.stop()}var a}),e,null,[[6,17]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){se&&(E(!0),c(!0))}),[se]);var Ae=null==ne?void 0:ne[v.D],je=null==ne?void 0:ne[m.X],ke=null==ne?void 0:ne[g.o],Pe=null==ne?void 0:ne[h.o],Ne=null==ne?void 0:ne[w.f],Ie=null==ne?void 0:ne[S.lk],Fe=null==ne?void 0:ne[S.Yt],Te=null==ne?void 0:ne[b.R];return(0,d.Y)(s.default.Fragment,null,o&&!B&&(0,d.Y)("div",{className:u()(null==xe?void 0:xe.className),css:T,"data-cy":"credential-form"},(0,d.Y)("div",{css:(0,d.AH)("display:flex;flex-direction:column;gap:48px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){padding:0;width:100%;}","")},(0,d.Y)("div",{css:F},(null==xe?void 0:xe.title)&&(0,d.Y)("h3",{className:"spectrum-Heading spectrum-Heading--sizeL"},null==xe?void 0:xe.title),(null==xe?void 0:xe.paragraph)&&(0,d.Y)("p",{className:"spectrum-Body spectrum-Body--sizeL"},null==xe?void 0:xe.paragraph),(0,d.Y)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:I,onClick:function(){return pe(!0)}},"developer"===be.type?"You're creating this credential in your personal developer organization":(0,d.Y)(s.default.Fragment,null,"You're creating this credential in [",(0,d.Y)("b",null,null==be?void 0:be.name),"]."),(0,d.Y)(D.y,{isShow:ue,setIsShow:pe})))),(0,d.Y)("div",{css:(0,d.AH)("display:flex;gap:35px;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){flex-direction:column;padding-left:0;}","")},(0,d.Y)("div",{css:(0,d.AH)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){width:100%;}","")},(0,d.Y)("div",{css:N},je&&(0,d.Y)(m.X,{nameProps:je,isFormValue:Ye,formData:_,handleChange:Se}),ke&&(0,d.Y)(g.o,{originsProps:ke,isFormValue:Ye,formData:_,handleChange:Se,isAllowedOriginsValid:he}),Pe&&Ne&&(0,d.Y)(h.o,{downloadsProp:Pe,type:"Downloads",formData:_,handleChange:Se}),_.Downloads&&Ne&&(0,d.Y)(w.f,{downloadProp:Ne,isFormValue:Ye,handleChange:Se}),(0,d.Y)(S.lk,{products:Ie,product:Fe}),Te&&(0,d.Y)(b.R,{formData:_,adobeDeveloperConsole:Te,handleChange:Se}),(0,d.Y)(C.e,{createCredential:De,isValid:re,setIsCreateNewCredential:z,isCreateNewCredential:j}))),Ae?(0,d.Y)(y.T,{sideContent:null==Ae?void 0:Ae.children,SideComp:v.D}):null)),ve&&(0,d.Y)(s.default.Fragment,null,(0,d.Y)(p.y,{customDisableFunction:me,message:o&&!Q?W:!V&&Q&&"Your credentials were created successfully.",variant:V||o&&!Q?"error":"success",disable:5e3})),B&&!Q&&!V&&!o&&(0,d.Y)(x.R,{credentials:xe,isCreateCredential:!0,downloadStatus:_.Downloads}),V&&!o&&!Q&&(0,d.Y)(Y.T,{errorMessage:null==L?void 0:L[Y.T]}),Q&&!o&&(0,d.Y)(O.q,{response:$,formData:_,handleRestart:function(){c(!0),ee(!1),z(!0),de(!0),H({})}}))}}}]);
//# sourceMappingURL=987e9e88-b403833a331e974907aa.js.map