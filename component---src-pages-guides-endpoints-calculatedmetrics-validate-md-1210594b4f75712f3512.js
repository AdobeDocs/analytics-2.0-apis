(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9650],{5991:function(e,t,n){"use strict";n.r(t),n.d(t,{_frontmatter:function(){return d},default:function(){return m}});var a=n(2122),i=n(9756),o=(n(5007),n(4983)),r=n(9536),c=["components"],d={},l={_frontmatter:d},s=r.Z;function m(e){var t=e.components,n=(0,i.Z)(e,c);return(0,o.mdx)(s,(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"validate-calculated-metrics"},"Validate calculated metrics"),(0,o.mdx)("p",null,"Because report suites can have different configurations, dimensions, or metrics, a calculated metric that is valid in one report suite may not be valid in another. To determine which calculated metric to use in different report suites, and why it may or may not be available, you can use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/validate")," endpoint. This endpoint allows you to ",(0,o.mdx)("inlineCode",{parentName:"p"},"POST")," a definition along with a target report suite id. The validate endpoint responds with compatibility information on the calculated metric."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://analytics.adobe.io/api/[COMPANY_NAME]/calculatedmetrics/validate")),(0,o.mdx)("h2",{id:"example-validate-request"},"Example validate request"),(0,o.mdx)("p",null,"The following example shows a request to validate a target report suite id for a given calculated metric definition:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X POST --header "Content-Type: application/json" --header "Accept: application/json" -H "x-api-key: [oauth token]" -H "x-proxy-global-company-id: [company name]" -H "Authorization: Bearer [ims user token]" -d "{\n  \\"rsid\\": \\"[report suite id]\\",\n  \\"definition\\": {\n    \\"formula\\": {\n      \\"func\\": \\"subtract\\",\n      \\"col2\\": {\n        \\"func\\": \\"metric\\",\n        \\"name\\": \\"metrics/reloads\\"\n      },\n      \\"col1\\": {\n        \\"func\\": \\"metric\\",\n        \\"name\\": \\"metrics/occurrences\\"\n      }\n    },\n    \\"func\\": \\"calc-metric\\",\n    \\"version\\": [\n      1,\n      0,\n      0\n    ]\n  }\n}" "http://analytics.adobe.io/api/[company name]/calculatedmetrics/validate?locale=en_US\n')),(0,o.mdx)("h2",{id:"example-validate-response"},"Example validate response"),(0,o.mdx)("p",null,"The following response shows that the calculated metric definition and the target report suite id in the previous request are compatible (",(0,o.mdx)("inlineCode",{parentName:"p"},'"valid": true'),"):"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": true,\n  "identityMetrics": [ { "identity": "metrics/occurrences" }, { "identity": "metrics/reloads" } ],\n  "functions": [ "subtract" ],\n  "validator_version": "1.0.0",\n  "supported_products": [ "oberon", "frag" ],\n  "supported_schema": [ "schema_oberon", "schema_frag" ]\n}\n')))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-endpoints-calculatedmetrics-validate-md-1210594b4f75712f3512.js.map