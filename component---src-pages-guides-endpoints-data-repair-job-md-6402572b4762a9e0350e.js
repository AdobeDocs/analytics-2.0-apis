(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[7754],{5866:function(e,n,a){"use strict";a.r(n),a.d(n,{_frontmatter:function(){return p},default:function(){return x}});var t=a(2122),o=a(9756),r=(a(5007),a(4983)),i=a(9536),d=["components"],p={},l=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",n)}},s=l("InlineAlert"),m=l("CodeBlock"),c={_frontmatter:p},u=i.Z;function x(e){var n=e.components,a=(0,o.Z)(e,d);return(0,r.mdx)(u,(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"job-endpoint"},"Job endpoint"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint allows you to create a data repair job (using ",(0,r.mdx)("inlineCode",{parentName:"p"},"POST"),") or retrieve a list of currently running jobs (using ",(0,r.mdx)("inlineCode",{parentName:"p"},"GET"),")."),(0,r.mdx)("h2",{id:"create-a-data-repair-job"},"Create a data repair job"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint uses the ",(0,r.mdx)("inlineCode",{parentName:"p"},"validationToken")," from the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to confirm that its parameters are the same as those passed to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate"),". If the parameters do not match or the server call volume has changed significantly between the call to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," and the call to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job"),", the Data Repair API returns an error. If the scope of the data repair job changes, re-run the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to generate a new ",(0,r.mdx)("inlineCode",{parentName:"p"},"validationToken"),"."),(0,r.mdx)(s,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Use of the Data Repair API permanently alters or deletes Adobe Analytics data.")," Follow the recommended workflow for testing and validation prior to applying any data repair jobs to production data."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"POST https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{RSID}/job")),(0,r.mdx)("p",null,"This API requires a ",(0,r.mdx)("a",{parentName:"p",href:"json-body.md"},"JSON body")," that contains the variables and actions to take."),(0,r.mdx)(m,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"request"},"Request"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -H "accept: application/json" \\\n    -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" \\\n    -H "x-api-key: {API_KEY/CLIENT_ID}" \\\n    -d \'{REPAIR_JOB_DEFINITION}\' \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/examplersid/job?validationToken={VALIDATION_TOKEN}&dateRangeStart=YYYY-03-28&dateRangeEnd=YYYY-03-29"\n')),(0,r.mdx)("h4",{id:"response"},"Response"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "dateRangeEnd": "YYYY-03-28",\n    "dateRangeStart": "YYYY-03-29",\n    "jobCompleteTime": null,\n    "jobCreateTime": "YYYY-04-24T09:02:59+00:00",\n    "jobDefinition": {\n        "variables": {\n            "activitymap": {\n                "action": "delete"\n            },\n            "prop12": {\n                "action": "delete"\n            },\n            "evar74": {\n                "action": "delete"\n            },\n            "evar107": {\n                "action": "delete"\n            }\n        }\n    },\n    "jobId": 24,\n    "progress": 0,\n    "reportSuiteId": "examplersid",\n    "serverCalls": null,\n    "status": "processing"\n}\n')),(0,r.mdx)("h2",{id:"view-a-job-list"},"View a job list"),(0,r.mdx)("p",null,"You can also use this endpoint to retrieve a list of data repair jobs that were created for the given report suite."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"GET https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{RSID}/job")),(0,r.mdx)(m,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"request-1"},"Request"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET -H "accept: application/json" \\\n    -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" \\\n    -H "x-api-key: {API_KEY/CLIENT_ID}" \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/examplersid/job"\n')),(0,r.mdx)("h4",{id:"response-1"},"Response"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "dateRangeEnd": "YYYY-03-28",\n        "dateRangeStart": "YYYY-03-28",\n        "jobCompleteTime": "YYYY-04-24T10:13:51+00:00",\n        "jobCreateTime": "YYYY-04-24T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "activitymap": {\n                    "action": "delete"\n                },\n                "prop12": {\n                    "action": "delete"\n                },\n                "evar74": {\n                    "action": "delete"\n                },\n                "evar107": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "24",\n        "progress": 100,\n        "reportSuiteId": "examplersid",\n        "serverCalls": 2,\n        "status": "complete"\n    },\n    {\n        "dateRangeEnd": "YYYY-04-24",\n        "dateRangeStart": "YYYY-04-24",\n        "jobCompleteTime": null,\n        "jobCreateTime": "YYYY-05-18T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "prop82": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "25",\n        "progress": 0,\n        "reportSuiteId": "examplersid",\n        "serverCalls": 2,\n        "status": "processing"\n    }\n]\n')),(0,r.mdx)("h2",{id:"view-an-individual-job"},"View an individual job"),(0,r.mdx)("p",null,"You can call the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job/{JOB_ID}")," endpoint to check on the progress of a data repair job. Following submission of a job, ",(0,r.mdx)("inlineCode",{parentName:"p"},"status")," reports as ",(0,r.mdx)("inlineCode",{parentName:"p"},"processing")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"progress")," is a number between ",(0,r.mdx)("inlineCode",{parentName:"p"},"0")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"100"),". Once complete, ",(0,r.mdx)("inlineCode",{parentName:"p"},"status")," reports as ",(0,r.mdx)("inlineCode",{parentName:"p"},"complete")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"serverCalls")," is set to the number of server calls scanned during the job. This ",(0,r.mdx)("inlineCode",{parentName:"p"},"serverCalls")," value is used to calculate usage."),(0,r.mdx)("p",null,"Completion of a repair job can take hours to days, depending on the date range of the repair job and the amount of traffic the report suite gets per day."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"GET https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{RSID}/job/{JOB_ID}")),(0,r.mdx)(m,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"request-2"},"Request"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET -H "accept: application/json" \\\n    -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" \\\n    -H "x-api-key: {API_KEY/CLIENT_ID}" \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/examplersid/job/24"\n')),(0,r.mdx)("h4",{id:"response-2"},"Response"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "dateRangeEnd": "YYYY-01-28",\n    "dateRangeStart": "YYYY-01-28",\n    "jobCompleteTime": "YYYY-03-24T10:13:51+00:00",\n    "jobCreateTime": "YYYY-03-24T09:02:59+00:00",\n    "jobDefinition": {\n        "variables": {\n            "activitymap": {\n                "action": "delete"\n            },\n            "prop12": {\n                "action": "delete"\n            },\n            "evar74": {\n                "action": "delete"\n            },\n            "evar107": {\n                "action": "delete"\n            }\n        }\n    },\n    "jobId": "24",\n    "progress": 100,\n    "reportSuiteId": "examplersid",\n    "serverCalls": 2,\n    "status": "complete"\n}\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-endpoints-data-repair-job-md-6402572b4762a9e0350e.js.map