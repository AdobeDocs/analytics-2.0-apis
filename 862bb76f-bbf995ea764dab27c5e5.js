"use strict";(self.webpackChunkanalytics_2_0_apis=self.webpackChunkanalytics_2_0_apis||[]).push([[6760],{7256:function(e,n,a){a.d(n,{q:function(){return _}});var s=a(10467),r=a(45458),o=a(54756),l=a.n(o),t=a(36190),i=a(41168),c=a(99634),d=a.n(c),p=a(92921),u=a.n(p),m=a(38596),v=a.n(m),g=a(33280),f=a(71052),y=a(35413),w=a(2047),h=a(25013),x=a(53581),b=a(46256),C=a(20719),k=a(3322),Y=a(3823),N=a(86868);var D={name:"1a50hjl",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;color:var(--spectrum-global-color-gray-800);text-decoration:underline;cursor:pointer;&:hover{color:var(--spectrum-global-color-gray-900);}"},A={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},S={name:"wwrf8h",styles:"display:flex;flex-direction:column;gap:8px;width:80%"},z={name:"1swkvfk",styles:"padding:0;font-family:'adobe-clean';border:none;background:transparent;margin-left:10px;cursor:pointer;text-decoration:underline;color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},j={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},P={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},L={name:"ti75j2",styles:"margin:0"},B={name:"a29rn1",styles:"display:flex;text-align:center;align-items:center;gap:10px"},H={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},M={name:"1xg43bt",styles:"display:flex;gap:20px;align-items:baseline"},I={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"},_=function e(n){var a,o,c=n.formData,p=n.response,m=n.handleRestart,_=(0,t.useContext)(Y.A),R=_.getCredentialData,T=_.selectedOrganization,E=R,F=(0,t.useState)(),O=F[0],U=F[1],Z=(0,t.useState)(""),q=Z[0],G=Z[1],J={},X={label:"products",productList:[]};null==E||null===(a=E[e])||void 0===a||a.children.forEach((function(e){var n,a,s=e.type,o=e.props;(J[s]=o,o.children&&s===C.s)&&(J[s]=o,null==o||null===(n=o.children)||void 0===n||n.forEach((function(e){var n=e.type,a=e.props;J[n]=a})));s===w.tZ&&null!=o&&o.children&&(a=X.productList).push.apply(a,(0,r.A)([].concat(o.children).map((function(e){var n=e.props;return{label:n.label,icon:n.icon}}))))}));var K=null==X?void 0:X.productList;(0,t.useEffect)((function(){c.Downloads&&V("/console/api/organizations/"+(null==T?void 0:T.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)}),[]);var Q=null==E?void 0:E[e],V=function(){var e=(0,s.A)(l().mark((function e(n,a,s){var r,o,t,i,c,d,p,m,f,y,w,h,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a="download"),U(!0),e.prev=2,e.next=5,v().getBinaryContent(s);case 5:return d=e.sent,p=new Uint8Array(d).buffer,m=new(u()),e.next=10,m.loadAsync(p);case 10:return f=null===(r=window.adobeIMS)||void 0===r||null===(o=r.getTokenFromStorage())||void 0===o?void 0:o.token,y={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f,"x-api-key":null===(t=window)||void 0===t||null===(i=t.adobeIMS)||void 0===i||null===(c=i.adobeIdData)||void 0===c?void 0:c.client_id}},e.next=14,fetch(n,y);case 14:if(200!==(w=e.sent).status){e.next=26;break}return e.next=18,w.json();case 18:return h=e.sent,m.file("credential.json",JSON.stringify(h)),e.next=22,m.generateAsync({type:"blob"});case 22:x=e.sent,(0,g.saveAs)(x,a+".zip"),e.next=27;break;case 26:console.error("Failed to fetch additional data. Response status:",w.status);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(2),console.error("An error occurred:",e.t0);case 32:return e.prev=32,U(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[2,29,32,35]])})));return function(n,a,s){return e.apply(this,arguments)}}();return(0,i.Y)("div",{className:d()(null==Q?void 0:Q.className),css:I},(0,i.Y)("div",{className:d()(null==Q?void 0:Q.className),css:(0,i.AH)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){padding:0;width:100%;}","")},(0,i.Y)("div",{css:M},(null==Q?void 0:Q.title)&&(0,i.Y)("h2",{className:"spectrum-Heading spectrum-Heading--sizeL",css:H},null==Q?void 0:Q.title),O&&(0,i.Y)("div",{css:B},(0,i.Y)("div",{className:"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-track"}),(0,i.Y)("div",{className:"spectrum-ProgressCircle-fills"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-fillMask1"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-fillSubMask1"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-fill"}))),(0,i.Y)("div",{className:"spectrum-ProgressCircle-fillMask2"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-fillSubMask2"},(0,i.Y)("div",{className:"spectrum-ProgressCircle-fill"}))))),(0,i.Y)("p",{css:L},"Downloading..."))),c.Downloads&&(null==Q?void 0:Q.paragraph)&&(0,i.Y)("p",{className:"spectrum-Body spectrum-Body--sizeL",css:P},null==Q?void 0:Q.paragraph),c.Downloads&&(0,i.Y)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:j},"Download not working?",(0,i.Y)("button",{css:z,onClick:function(){return V("/console/api/organizations/"+(null==T?void 0:T.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)},"data-cy":"restart-download"},"Restart download"))),(0,i.Y)("div",{css:(0,i.AH)("display:flex;gap:35px;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){flex-direction:column;padding-left:0;}","")},(0,i.Y)("div",{css:(0,i.AH)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",f.jd,") and (max-width: ",f.cp,"){width:100%;}","")},(0,i.Y)(N.g,{credentialName:c.CredentialName,productList:K,ProductComponent:w.tZ,AccessTokenComponent:x.m,DevConsoleLinkComponent:b.x,ClientDetailsComponent:C.s,allowedOriginsDetails:c.AllowedOrigins,organizationName:T,response:p,nextButtonLink:null==Q?void 0:Q.nextStepsHref,nextButtonLabel:null==Q?void 0:Q.nextStepsLabel,devConsoleLink:null==Q?void 0:Q.devConsoleDirection,developerConsoleManage:null==Q?void 0:Q.developerConsoleManage,myCredentialFields:J}),(0,i.Y)("div",{css:S},(0,i.Y)("h4",{className:"spectrum-Heading spectrum-Heading--sizeXS",css:A},"Need another credential"),(0,i.Y)("p",{className:"spectrum-Body spectrum-Body--sizeS"},(0,i.Y)("button",{onClick:m,css:D,"data-cy":"Restart-new-credential"},"Restart and create a new credential")))),null!=Q&&Q.children?(0,i.Y)(k.T,{sideContent:null===(o=J[h.D])||void 0===o?void 0:o.children,SideComp:h.D}):null),q&&(0,i.Y)(y.y,{variant:"success",message:"Copied to clipboard",disable:1e3,customDisableFunction:G}))}}}]);
//# sourceMappingURL=862bb76f-bbf995ea764dab27c5e5.js.map