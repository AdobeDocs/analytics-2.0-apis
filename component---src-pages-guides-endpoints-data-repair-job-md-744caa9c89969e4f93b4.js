(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[7754],{5866:function(e,n,a){"use strict";a.r(n),a.d(n,{_frontmatter:function(){return p},default:function(){return m}});var t=a(2122),o=a(9756),r=(a(5007),a(4983)),i=a(9536),l=["components"],p={},d={_frontmatter:p},s=i.Z;function m(e){var n=e.components,a=(0,o.Z)(e,l);return(0,r.mdx)(s,(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"job-endpoint"},"Job endpoint"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint allows you to create a data repair job (using ",(0,r.mdx)("inlineCode",{parentName:"p"},"POST"),") or retrieve a list of currently running jobs (using ",(0,r.mdx)("inlineCode",{parentName:"p"},"GET"),")."),(0,r.mdx)("h2",{id:"create-a-data-repair-job"},"Create a data repair job"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint uses the ",(0,r.mdx)("inlineCode",{parentName:"p"},"validationToken")," from the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to confirm that its parameters are the same as those passed to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate"),". If the parameters do not match or the server call volume has changed significantly between the call to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," and the call to ",(0,r.mdx)("inlineCode",{parentName:"p"},"/job"),", the Data Repair API returns an error."),(0,r.mdx)("p",null,"If the scope of the data repair job changes, re-run the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to generate a new ",(0,r.mdx)("inlineCode",{parentName:"p"},"validationToken"),"."),(0,r.mdx)("blockquote",null,(0,r.mdx)("p",{parentName:"blockquote"},"WARNING: Use of the Data Repair API permanently deletes existing Adobe Analtyics data. Follow the recommended workflow for testing and validation prior to applying any data repair jobs to production data.")),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"POST https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job")),(0,r.mdx)("p",null,"A JSON object containing the variables and actions to take is required in the request body. See ",(0,r.mdx)("a",{parentName:"p",href:"variables.md"},"Job definition and variables")," for information around how to create this JSON object."),(0,r.mdx)("p",null,"Example request:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -H "accept: application/json" -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" -H "x-api-key: {API_KEY/CLIENT_ID}" -d \'{REPAIR_JOB_DEFINITION}\' \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job?validationToken={VALIDATION_TOKEN}&dateRangeStart={YYYY-MM-DD}&dateRangeEnd={YYYY-MM-DD}"\n')),(0,r.mdx)("p",null,"Example Response:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "dateRangeEnd": "2019-03-28",\n    "dateRangeStart": "2019-03-28",\n    "jobCompleteTime": null,\n    "jobCreateTime": "2020-03-24T09:02:59+00:00",\n    "jobDefinition": {\n        "variables": {\n            "activitymap": {\n                "action": "delete"\n            },\n            "prop12": {\n                "action": "delete"\n            },\n            "evar74": {\n                "action": "delete"\n            },\n            "evar107": {\n                "action": "delete"\n            }\n        }\n    },\n    "jobId": 24,\n    "progress": 0,\n    "reportSuiteId": "sample.reportsuite",\n    "serverCalls": null,\n    "status": "processing"\n}\n')),(0,r.mdx)("h2",{id:"view-a-job-list"},"View a job list"),(0,r.mdx)("p",null,"You can also use this endpoint to retrieve a list of data repair jobs that were created for the given report suite."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"GET https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job")),(0,r.mdx)("p",null,"Example request:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET -H "accept: application/json" -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" -H "x-api-key: {API_KEY/CLIENT_ID}" \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job"\n')),(0,r.mdx)("p",null,"Example Response:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "dateRangeEnd": "2019-03-28",\n        "dateRangeStart": "2019-03-28",\n        "jobCompleteTime": "2020-03-24T10:13:51+00:00",\n        "jobCreateTime": "2020-03-24T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "activitymap": {\n                    "action": "delete"\n                },\n                "prop12": {\n                    "action": "delete"\n                },\n                "evar74": {\n                    "action": "delete"\n                },\n                "evar107": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "24",\n        "progress": 100,\n        "reportSuiteId": "sample.reportsuite",\n        "serverCalls": 2,\n        "status": "complete"\n    },\n    {\n        "dateRangeEnd": "2019-04-28",\n        "dateRangeStart": "2019-04-28",\n        "jobCompleteTime": null,\n        "jobCreateTime": "2020-04-24T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "prop82": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "25",\n        "progress": 0,\n        "reportSuiteId": "sample.reportsuite",\n        "serverCalls": 2,\n        "status": "processing"\n    }\n]\n')))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-endpoints-data-repair-job-md-744caa9c89969e4f93b4.js.map